<!DOCTYPE html>

<!-- Sabrina Bowers -->
<!-- Final Project -->

<!---------------------------------------->
<head>
    <script src="projectJS.js"></script>
    <title>WEB-115 Final Project</title>
    <link rel="stylesheet" href="styles.css">

    <script>
      // SAVE DATA
      function saveUserInput() {

          // EMAIL - NAME - GOAL
          localStorage.setItem('email', document.getElementById('email').value);
          localStorage.setItem('name', document.getElementById('name').value);
          localStorage.setItem('weeklyGoal', document.getElementById('goal').value);

          // MONDAY - SUNDAY 
          const mealTable = document.getElementById('mealTable');
        const rows = mealTable.getElementsByTagName('tr');

        for (let i = 1; i < rows.length; i++) {
            const cells = rows[i].getElementsByTagName('td');
            const day = cells[0].innerText;
            const breakfast = cells[1].getElementsByTagName('input')[0].value;
            const snack = cells[2].getElementsByTagName('input')[0].value;
            const lunch = cells[3].getElementsByTagName('input')[0].value;
            const snack2 = cells[4].getElementsByTagName('input')[0].value;
            const dinner = cells[5].getElementsByTagName('input')[0].value;

            localStorage.setItem(`meal_${day}_breakfast`, breakfast);
            localStorage.setItem(`meal_${day}_snack`, snack);
            localStorage.setItem(`meal_${day}_lunch`, lunch);
            localStorage.setItem(`meal_${day}_snack2`, snack2);
            localStorage.setItem(`meal_${day}_dinner`, dinner);
        }
      }
  
      // GO TO THE FUNNY PAGE
      function goToMealPage() {
          saveUserInput();

      //--------------------------------------
      // EMAIL VALIDATION --------------------
      var email = document.getElementById("email").value;

      var emailRegex = /^\S+@\S+\.\S+$/;
      if (!emailRegex.test(email)) {
      alert("Please enter a valid email address.");
      return;
      }

      var email = document.getElementById('email').value;

          window.location.href = 'meal.html';
      }
  </script>
</head>
<!---------------------------------------->

<html>

<body>
    <div class="container">

        <div id="bannerdiv">
            <!-- Banner Image -->
            <img src="Images/Perfectly Portioned Fitness.png" alt="Banner" class="center">
        </div>

        <!--- INFO STUFF --->
        <!---------------------------------------->
        <div>
          <h2>User Information</h2>
          <table>
            <tr>
              <th>Email:</th>
              <td><input type="text" id="email"></td>

              <th>Name:</th>
              <td><input type="text" id="name"></td>

              <th>Weekly Goal:</th>
              <td><input type="text" id="goal"></td>
            </tr>
          </table>
      </div>

        <!--- TABLE --->
        <!---------------------------------------->
        <h2>Meal Plan</h2>
        <table id="mealTable">
          <tr>
            <th>Day</th>
            <th>Breakfast</th>
            <th>Snack</th>
            <th>Lunch</th>
            <th>Snack (2)</th>
            <th>Dinner</th>
          </tr>
          <tr>
            <td>Monday</td>
            <td><input type="text" id="monday-breakfast"></td>
            <td><input type="text" id="monday-snack"></td>
            <td><input type="text" id="monday-lunch"></td>
            <td><input type="text" id="monday-snack2"></td>
            <td><input type="text" id="monday-dinner"></td>
          </tr>
          <tr>
            <td>Tuesday</td>
            <td><input type="text" id="tuesday-breakfast"></td>
            <td><input type="text" id="tuesday-snack"></td>
            <td><input type="text" id="tuesday-lunch"></td>
            <td><input type="text" id="tuesday-snack2"></td>
            <td><input type="text" id="tuesday-dinner"></td>
          </tr>
          <tr>
            <td>Wednesday</td>
            <td><input type="text" id="wednesday-breakfast"></td>
            <td><input type="text" id="wednesday-snack"></td>
            <td><input type="text" id="wednesday-lunch"></td>
            <td><input type="text" id="wednesday-snack2"></td>
            <td><input type="text" id="wednesday-dinner"></td>
          </tr>
          <tr>
            <td>Thursday</td>
            <td><input type="text" id="thursday-breakfast"></td>
            <td><input type="text" id="thursday-snack"></td>
            <td><input type="text" id="thursday-lunch"></td>
            <td><input type="text" id="thursday-snack2"></td>
            <td><input type="text" id="thursday-dinner"></td>
          </tr>
          <tr>
            <td>Friday</td>
            <td><input type="text" id="friday-breakfast"></td>
            <td><input type="text" id="friday-snack"></td>
            <td><input type="text" id="friday-lunch"></td>
            <td><input type="text" id="friday-snack2"></td>
            <td><input type="text" id="friday-dinner"></td>
          </tr>
          <tr>
            <td>Saturday</td>
            <td><input type="text" id="saturday-breakfast"></td>
            <td><input type="text" id="saturday-snack"></td>
            <td><input type="text" id="saturday-lunch"></td>
            <td><input type="text" id="saturday-snack2"></td>
            <td><input type="text" id="saturday-dinner"></td>
          </tr>
          <tr>
            <td>Sunday</td>
            <td><input type="text" id="sunday-breakfast"></td>
            <td><input type="text" id="sunday-snack"></td>
            <td><input type="text" id="sunday-lunch"></td>
            <td><input type="text" id="sunday-snack2"></td>
            <td><input type="text" id="sunday-dinner"></td>
          </tr>
        </table>

        <button onclick="goToMealPage()">Plan your meal</button>
    </div>

</body>

</html>